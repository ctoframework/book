\usepackage{fancyhdr}

\pagestyle{fancy} % Enable fancy headers/footers
\fancyhf{} % Clear all headers and footers

% Define header (only on right-hand pages)
\fancyhead[RO]{\rightmark}

% Define footer (only on right-hand pages)
\fancyfoot[RO]{\rule{\textwidth}{0.4pt} \\ \thepage}

% Ensure chapter names appear correctly
\renewcommand{\chaptermark}[1]{\markright{\thechapter\quad #1}}

% Ensure the first page of a chapter does not have headers
\fancypagestyle{plain}{
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt} % Remove header rule
    \fancyfoot[RO]{\rule{\textwidth}{0.4pt} \\ \thepage}
}